{% set t = i18n[locale] %}
{% set cleanPath = page.url
  | replace("/fr/", "/")
  | replace("/en/", "/")
  | replace("/de/", "/")
%}

<header id="cs-navigation">
    <div class="cs-container">
      <!--Nav Logo-->
      <a href="/{{ locale }}/" class="cs-logo" aria-label="{{ t.nav.home }}">
        <img src="/assets/svgs/test12.svg" alt="Logo" width="210" height="29" aria-hidden="true" decoding="async">
      </a>
  
      <nav class="cs-nav" aria-label="Navigation principale">
        <button class="cs-toggle" id="cs-toggle" aria-expanded="false" aria-controls="cs-ul-wrapper" aria-label="Ouvrir le menu mobile" aria-haspopup="menu">
          <span class="cs-box" aria-hidden="true">
            <span class="cs-line cs-line1" aria-hidden="true"></span>
            <span class="cs-line cs-line2" aria-hidden="true"></span>
            <span class="cs-line cs-line3" aria-hidden="true"></span>
          </span>
        </button>
  
        <div class="cs-ul-wrapper" id="cs-ul-wrapper" inert>
          <ul id="cs-expanded" class="cs-ul">
  
            <li class="cs-li">
              <a href="/{{ locale }}/"
                 class="cs-li-link {% if page.url == '/' ~ locale ~ '/' %} cs-active {% endif %}"
                 {% if page.url == '/' ~ locale ~ '/' %} aria-current="page" {% endif %}>
                 {{ t.nav.home }}
              </a>
            </li>
  
            <li class="cs-li">
              <a href="/{{ locale }}/about/"
                 class="cs-li-link {% if page.url.endsWith('/about/') %} cs-active {% endif %}"
                 {% if page.url.endsWith('/about/') %} aria-current="page" {% endif %}>
                 {{ t.nav.about }}
              </a>
            </li>
  
            <li class="cs-li">
              <a href="/{{ locale }}/services/"
                 class="cs-li-link {% if page.url.endsWith('/services/') %} cs-active {% endif %}"
                 {% if page.url.endsWith('/services/') %} aria-current="page" {% endif %}>
                 {{ t.nav.services }}
              </a>
            </li>
  
            <li class="cs-li cs-hide-on-desktop">
              <a href="/{{ locale }}/contact/"
                 class="cs-li-link {% if page.url.endsWith('/contact/') %} cs-active {% endif %}"
                 {% if page.url.endsWith('/contact/') %} aria-current="page" {% endif %}>
                 {{ t.nav.contact }}
              </a>
            </li>
  
            <!-- Mobile language switcher (same page) -->
            <li class="cs-li cs-lang-mobile-wrap">
              <div class="cs-lang cs-lang--mobile" aria-label="Language switch">
                <a href="/fr{{ cleanPath }}" class="cs-lang-link {% if locale == 'fr' %}cs-active{% endif %}" lang="fr" {% if locale == 'fr' %}aria-current="true"{% endif %}>FR</a>
                <a href="/en{{ cleanPath }}" class="cs-lang-link {% if locale == 'en' %}cs-active{% endif %}" lang="en" {% if locale == 'en' %}aria-current="true"{% endif %}>EN</a>
                <a href="/de{{ cleanPath }}" class="cs-lang-link {% if locale == 'de' %}cs-active{% endif %}" lang="de" {% if locale == 'de' %}aria-current="true"{% endif %}>DE</a>
              </div>
            </li>
  
          </ul>
        </div>
      </nav>
  
      <!-- Main CTA -->
      <a href="/{{ locale }}/contact/" class="cs-button-solid cs-nav-button">{{ t.cta }}</a>
  
      <!-- Desktop language switcher (same page) -->
      <div class="cs-lang cs-lang--desktop" aria-label="Language switch">
        <a href="/fr{{ cleanPath }}" class="cs-lang-link {% if locale == 'fr' %}cs-active{% endif %}" lang="fr" {% if locale == 'fr' %}aria-current="true"{% endif %}>FR</a>
        <a href="/en{{ cleanPath }}" class="cs-lang-link {% if locale == 'en' %}cs-active{% endif %}" lang="en" {% if locale == 'en' %}aria-current="true"{% endif %}>EN</a>
        <a href="/de{{ cleanPath }}" class="cs-lang-link {% if locale == 'de' %}cs-active{% endif %}" lang="de" {% if locale == 'de' %}aria-current="true"{% endif %}>DE</a>
      </div>
  
    </div>
  </header>
  